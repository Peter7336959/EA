<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IHMOD 2.0：化學混合物暴露模型分析</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 40vh;
            max-height: 450px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 50vh;
            }
        }
        .flow-step {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem;
            border-radius: 0.5rem;
            min-height: 100px;
            width: 100%;
        }
        .flow-arrow {
            font-size: 2.5rem;
            line-height: 1;
            color: #FC913A;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-black text-gray-900 mb-2">化學混合物暴露評估模型</h1>
            <p class="text-lg md:text-xl text-[#FF4E50] font-bold">使用 IHMOD 2.0 評估擋風玻璃清洗液的風險</p>
        </header>

        <main class="space-y-16">

            <section id="introduction" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-900">情境設定：一個常見任務，潛藏未知風險？</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <p class="text-5xl mb-2">🚗</p>
                        <h3 class="text-xl font-bold mb-2">任務</h3>
                        <p>在住宅車庫內，將4公升新的擋風玻璃清洗液倒入汽車儲液罐。</p>
                    </div>
                    <div class="bg-[#E1F5C4] p-6 rounded-lg ring-4 ring-[#FF4E50]">
                        <p class="text-5xl mb-2">🧪</p>
                        <h3 class="text-xl font-bold mb-2">關注的化學物質</h3>
                        <p class="font-bold text-2xl text-[#FF4E50]">乙二醇單丁醚 (2BE)</p>
                        <p>一種半揮發性有機化合物，在水性混合物中重量佔比 <30%。</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <p class="text-5xl mb-2">🤔</p>
                        <h3 class="text-xl font-bold mb-2">問題</h3>
                        <p>消費者執行這項30秒的任務時，潛在的吸入性暴露量是多少？</p>
                    </div>
                </div>
            </section>

            <section id="generation-rate" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-900">混合物的挑戰：為何沒那麼簡單</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">純物質的模型相對簡單，但混合物不然。在水與2BE的混合液中，分子間的交互作用會改變2BE的蒸發難易度。我們必須考慮這種「非理想」行為，才能準確預測蒸氣生成率 (G)。</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="flex flex-col items-center space-y-4">
                        <div class="flow-step bg-gray-100">
                            <div>
                                <h4 class="font-bold">步驟 1：成分</h4>
                                <p>從重量百分比 (30% 2BE, 70% 水) 開始，轉換為莫耳分率 (x)：<strong>2BE 為 0.06</strong>。</p>
                            </div>
                        </div>
                        <div class="flow-arrow">↓</div>
                        <div class="flow-step bg-gray-100">
                            <div>
                                <h4 class="font-bold">步驟 2：理想 vs. 現實</h4>
                                <p>拉午耳定律 ($P_a = x_a \cdot P_{v,a}$) 假設為理想溶液，但水和2BE並非理想組合。</p>
                            </div>
                        </div>
                        <div class="flow-arrow">↓</div>
                        <div class="flow-step bg-[#F9D423] text-gray-900">
                             <div>
                                <h4 class="font-bold">步驟 3：校正因子</h4>
                                <p>我們引入<strong>活性係數 ($\gamma$)</strong> 來校正非理想行為，這是準確評估的關鍵。</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center bg-gray-800 text-white p-8 rounded-lg">
                        <h3 class="text-2xl font-bold text-[#F9D423]">活性係數 ($\gamma$)</h3>
                        <p class="text-lg mt-2 mb-4">使用 UNIFAC 方法計算，此數值揭示了真實的蒸發潛力。</p>
                        <p class="text-8xl font-black text-white">7.31</p>
                        <p class="text-lg mt-4">這表示2BE的蒸發量是簡單「理想」模型預測的<strong>7倍以上</strong>。忽略這一點將會嚴重低估風險。</p>
                    </div>
                </div>
                 <div class="text-center mt-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold">最終蒸氣生成率 (G)</h3>
                    <p class="text-lg mt-2 mb-4">使用校正後的蒸氣壓，我們計算出在30秒傾倒過程中2BE蒸氣的釋放速率。</p>
                    <p class="text-5xl font-black text-[#FC913A]">20 mg/min</p>
                </div>
            </section>
            
            <section id="modeling" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-900">暴露模型：雙區塊分析法</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">我們使用「近場/遠場」模型來模擬車庫內的暴露情況。這比假設化學物質立即在整個房間內均勻混合要來得更真實。</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="bg-gray-100 p-6 rounded-lg flex flex-col justify-center text-center">
                        <h3 class="text-xl font-bold mb-2">👤 近場 (NF)</h3>
                        <p>圍繞作業人員頭部的一個半徑為1公尺的半球體。這是濃度最高的呼吸區域。</p>
                    </div>
                    <div class="bg-gray-100 p-6 rounded-lg flex flex-col justify-center text-center">
                        <h3 class="text-xl font-bold mb-2">🏠 遠場 (FF)</h3>
                        <p>車庫剩餘的42立方公尺空間。由於體積較大，此處的濃度因稀釋而較低。</p>
                    </div>
                </div>
            </section>

            <section id="deterministic-results" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-900">分析 1：決定論結果</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">首先，我們使用所有輸入參數的單點估計值（例如 G = 20 mg/min，通風率 = 0.5 ACH）來運行模型。這給了我們一個特定的結果。</p>
                <div class="chart-container">
                    <canvas id="deterministicChart"></canvas>
                </div>
                <div class="text-center mt-6">
                    <p class="text-lg">模型預測，在傾倒停止的第30秒時，近場峰值濃度為 <strong class="text-2xl font-bold text-[#FF4E50]">1.98 mg/m³</strong>。</p>
                </div>
            </section>

            <section id="probabilistic-results" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-900">分析 2：機率性（蒙地卡羅）結果</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">真實世界是多變的。蒙地卡羅模擬運行模型10,000次，每次都使用一系列可能的輸入值。這給了我們一個可能結果的分佈，而不僅僅是一個數字。</p>
                <div class="chart-container">
                    <canvas id="probabilisticChart"></canvas>
                </div>
                 <div class="text-center mt-6">
                    <p class="text-lg">第95百分位數的結果，作為一個「合理最壞情況」的估計，顯示近場峰值濃度為 <strong class="text-2xl font-bold text-[#FF4E50]">2.5 mg/m³</strong>。</p>
                </div>
            </section>

            <section id="risk-characterization" class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-900">最終判斷：結果比較</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">最後一步是將我們模擬出的峰值濃度與已建立的健康暴露限值進行比較。這告訴我們暴露是否在可接受的範圍內。</p>
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
                <div class="mt-8 p-6 bg-gray-50 rounded-lg">
                    <h3 class="text-xl font-bold text-center mb-4">關鍵結論</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>決定論 (1.98 mg/m³) 和第95百分位數 (2.5 mg/m³) 的峰值濃度均<strong class="text-green-600">遠低於</strong>所有職業暴露限值 (OELs)，其中最嚴格的 NIOSH REL 為 24 mg/m³。</li>
                        <li>峰值濃度<strong class="text-orange-600">確實超過</strong>了美國環保署的參考濃度 (RfC) 1.6 mg/m³。然而，RfC 是針對一般大眾終身持續暴露所設計，而非短暫、不頻繁的任務。</li>
                        <li class="font-bold">結論：對於單次、短期的消費者使用，風險被認為是低的且可接受。然而，對於每天執行此任務的技師，則需要更深入的評估。</li>
                    </ul>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16 pt-8 border-t border-gray-300">
            <p class="text-xs text-gray-400 mt-4">參考資料：Chapter 13 Filling a Container With a Mixture and Using IHMOD 2.0 for Modeling Calculations. prepared by Peter Ho. 114.08.18</p>
        </footer>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const FONT_COLOR = '#374151';
    const GRID_COLOR = '#E5E7EB';
    const PALETTE = {
        red: '#FF4E50',
        orange: '#FC913A',
        yellow: '#F9D423',
        lightGreen: '#EDE574',
        palestGreen: '#E1F5C4',
    };

    const wrapLabel = (label) => {
        if (typeof label !== 'string' || label.length <= 16) {
            return label;
        }
        const words = label.split(' ');
        const lines = [];
        let currentLine = '';
        for (const word of words) {
            if ((currentLine + word).length > 16 && currentLine.length > 0) {
                lines.push(currentLine.trim());
                currentLine = '';
            }
            currentLine += word + ' ';
        }
        lines.push(currentLine.trim());
        return lines;
    };

    const tooltipTitleCallback = (tooltipItems) => {
        const item = tooltipItems[0];
        let label = item.chart.data.labels[item.dataIndex];
        return Array.isArray(label) ? label.join(' ') : label;
    };

    const commonChartOptions = {
        maintainAspectRatio: false,
        responsive: true,
        plugins: {
            legend: {
                labels: {
                    color: FONT_COLOR,
                    font: {
                        family: "'Inter', 'Noto Sans TC', sans-serif",
                        weight: '600'
                    }
                }
            },
            tooltip: {
                callbacks: {
                    title: tooltipTitleCallback
                },
                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                titleFont: {
                    size: 14,
                    family: "'Inter', 'Noto Sans TC', sans-serif",
                },
                bodyFont: {
                    size: 12,
                    family: "'Inter', 'Noto Sans TC', sans-serif",
                }
            }
        },
        scales: {
            x: {
                ticks: {
                    color: FONT_COLOR,
                    font: {
                       family: "'Inter', 'Noto Sans TC', sans-serif",
                    }
                },
                grid: {
                    color: GRID_COLOR
                }
            },
            y: {
                ticks: {
                    color: FONT_COLOR,
                    font: {
                        family: "'Inter', 'Noto Sans TC', sans-serif",
                    }
                },
                grid: {
                    color: GRID_COLOR
                },
                beginAtZero: true
            }
        }
    };

    const deterministicCtx = document.getElementById('deterministicChart').getContext('2d');
    new Chart(deterministicCtx, {
        type: 'line',
        data: {
            labels: ['0', '0.5 (傾倒停止)', '1', '2', '5', '10'],
            datasets: [{
                label: '近場濃度 (mg/m³)',
                data: [0, 1.98, 1.2, 0.7, 0.3, 0.1],
                borderColor: PALETTE.red,
                backgroundColor: 'rgba(255, 78, 80, 0.2)',
                fill: true,
                tension: 0.1
            }, {
                label: '遠場濃度 (mg/m³)',
                data: [0, 0.227, 0.22, 0.2, 0.15, 0.1],
                borderColor: PALETTE.orange,
                backgroundColor: 'rgba(252, 145, 58, 0.2)',
                fill: true,
                tension: 0.1
            }]
        },
        options: { ...commonChartOptions,
            scales: { ...commonChartOptions.scales,
                x: { ...commonChartOptions.scales.x, title: { display: true, text: '時間 (分鐘)', color: FONT_COLOR, font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } },
                y: { ...commonChartOptions.scales.y, title: { display: true, text: '濃度 (mg/m³)', color: FONT_COLOR, font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } }
            }
        }
    });

    const probabilisticCtx = document.getElementById('probabilisticChart').getContext('2d');
    new Chart(probabilisticCtx, {
        type: 'line',
        data: {
            labels: ['0', '0.5 (傾倒停止)', '1', '2', '5', '10'],
            datasets: [{
                label: '第95百分位數近場濃度 (mg/m³)',
                data: [0, 2.5, 1.6, 0.9, 0.4, 0.15],
                borderColor: PALETTE.red,
                backgroundColor: 'rgba(255, 78, 80, 0.2)',
                fill: 'origin',
                tension: 0.1
            }, {
                label: '第50百分位數(中位數)近場濃度 (mg/m³)',
                data: [0, 1.98, 1.2, 0.7, 0.3, 0.1],
                borderColor: PALETTE.orange,
                fill: false,
                tension: 0.1,
                borderDash: [5, 5]
            }, {
                label: '第5百分位數近場濃度 (mg/m³)',
                data: [0, 1.5, 0.9, 0.5, 0.2, 0.05],
                borderColor: PALETTE.yellow,
                backgroundColor: 'rgba(249, 212, 35, 0.2)',
                fill: 'origin',
                tension: 0.1
            }]
        },
        options: { ...commonChartOptions,
            scales: { ...commonChartOptions.scales,
                x: { ...commonChartOptions.scales.x, title: { display: true, text: '時間 (分鐘)', color: FONT_COLOR, font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } },
                y: { ...commonChartOptions.scales.y, title: { display: true, text: '濃度 (mg/m³)', color: FONT_COLOR, font: { family: "'Inter', 'Noto Sans TC', sans-serif" } } }
            }
        }
    });

    const comparisonCtx = document.getElementById('comparisonChart').getContext('2d');
    const comparisonLabels = [
        '決定論峰值 (1.98)', 
        '第95百分位數峰值 (2.5)', 
        'EPA RfC (終身)', 
        'NIOSH REL (最嚴格OEL)', 
        'ACGIH TLV', 
        'OSHA PEL (最高OEL)'
    ].map(wrapLabel);

    new Chart(comparisonCtx, {
        type: 'bar',
        data: {
            labels: comparisonLabels,
            datasets: [{
                label: '濃度 (mg/m³)',
                data: [1.98, 2.5, 1.6, 24, 96, 240],
                backgroundColor: [
                    PALETTE.red,
                    PALETTE.orange,
                    '#60A5FA',
                    '#34D399',
                    '#A78BFA',
                    '#F472B6'
                ],
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        },
        options: { ...commonChartOptions,
            indexAxis: 'y',
            plugins: { ...commonChartOptions.plugins,
                legend: {
                    display: false
                }
            },
            scales: {
                x: {
                    type: 'logarithmic',
                    title: {
                        display: true,
                        text: '濃度 (mg/m³) - 對數座標',
                        color: FONT_COLOR,
                        font: { family: "'Inter', 'Noto Sans TC', sans-serif" }
                    },
                    ticks: {
                        color: FONT_COLOR,
                        font: { family: "'Inter', 'Noto Sans TC', sans-serif" }
                    },
                    grid: { color: GRID_COLOR }
                },
                y: {
                    ticks: {
                        color: FONT_COLOR,
                        font: { family: "'Inter', 'Noto Sans TC', sans-serif" }
                    },
                    grid: { display: false }
                }
            }
        }
    });
});
</script>
</body>
</html>
